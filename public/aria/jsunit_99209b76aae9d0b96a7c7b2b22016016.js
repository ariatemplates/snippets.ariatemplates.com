/**
 * Copyright 2012 Amadeus s.a.s.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
//***MULTI-PART
//YpwKgK3gnz
//LOGICAL-PATH:aria/jsunit/AppletWorker.js
//YpwKgK3gnz
(function(){var b,c,d;Aria.$global.AppletCallback=function(){if(b!=null){b.call(c,d);d=c=b=null}};Aria.classDefinition({$classpath:"aria.jsunit.AppletWorker",$singleton:true,$constructor:function(){this._appletName=this._applet=null;this._isReady=false},$destructor:function(){},$prototype:{init:function(a){if(this._applet==null){this._appletName=0;this._applet=this._addApplet(a);this._isReady=true;if(!this._applet)throw Error(this._appletName+" applet was not found in the document");}},_addApplet:function(a){Aria.$frameworkWindow.document.getElementById(a).innerHTML=
"<APPLET name='myTestApplet' code='ScreenCaptureApplet.class' archive='ScreenCapture.jar' width='1000' height='100' MAYSCRIPT></APPLET>";return this._getApplet()},_getApplet:function(){return Aria.$frameworkWindow.document.applets[this._appletName]||null},sendInstruction:function(a){b=a.cb;c=a.scope;d=a.args;this._applet.setInstruction(a.instruction,"AppletCallback")},getResponse:function(){var a=this._applet.getResponse(),e=1,f="No response yet - Retry later";if(a.indexOf(";")!=-1){a=a.split(";");
e=a[0];if(a.length>1)f=a[1]}return{code:e,reason:f}},isReady:function(){return this._isReady}}})})();
//YpwKgK3gnz
//LOGICAL-PATH:aria/jsunit/Assert.js
//YpwKgK3gnz
(function(){var h=Aria.$global.console,i=function(a,b){if(a===b)return null;if(typeof b!=typeof a)return[];if(typeof b=="object"||typeof b=="array")for(var c in b){var d=i(a[c],b[c]);if(d!=null){d.unshift(c);return d}}else if(a!=b)return[];return null};Aria.classDefinition({$classpath:"aria.jsunit.Assert",$extends:"aria.jsunit.Test",$statics:{ERROR_TYPES:{ERROR:"error",FAILURE:"failure"}},$dependencies:["aria.core.log.SilentArrayAppender","aria.core.Log"],$constructor:function(){this.$Test.constructor.call(this);
this._currentTestName="";this._totalAssertCount=this._assertCount=0;this._expectedEventsList=this._overriddenClasses=null;this._eventIndexInList=0;this.evtLogs=[];aria.core.Log.clearAppenders();aria.core.Log.addAppender(new aria.core.log.SilentArrayAppender);aria.core.Log.resetLoggingLevels();aria.core.Log.setLoggingLevel("*",1)},$destructor:function(){this._expectedEventsList=null;this.$Test.$destructor.call(this)},$prototype:{ASSERT_FAILURE:"Assert Failure",_startTest:function(){this.$Test._startTest.call(this);
this._totalAssertCount=0;this.$raiseEvent({name:"start",testObject:this,testClass:this.$classpath})},_endTest:function(){this.$Test._endTest.call(this);this.checkExpectedEventListEnd();this.resetClassOverrides();this.assertLogsEmpty(false);this._assertCount=0;this._currentTestName="";this._isFinished=true;this.$raiseEvent({name:"end",testObject:this,testClass:this.$classpath,nbrOfAsserts:this._totalAssertCount})},_updateAssertInfo:function(a){this._assertCount=0;this._currentTestName=a;this.$raiseEvent({name:"stateChange",
testClass:this.$classpath,testState:this._currentTestName})},assertTrue:function(a,b){this._assertCount++;this._totalAssertCount++;if(a!==true){var c="Assert #"+this._assertCount+" failed";if(b)c+=" : "+b;this.raiseFailure(c);aria.core.Browser.isFirefox&&h&&aria.utils.Type.isFunction(h.trace)&&h.assert(false,"Stack trace for failed Assert #"+this._assertCount+" in test : ["+this._currentTestName+"]");throw{name:this.ASSERT_FAILURE,message:c};}},assertFalse:function(a,b){this.assertTrue(a===false,
b)},assertEquals:function(a,b,c){this.assertTrue(a===b,c)},assertNotEquals:function(a,b,c){this.assertTrue(a!==b,c)},assertLogsEmpty:function(a){this._assertCount++;this._totalAssertCount++;var b=aria.core.Log.getAppenders()[0];if(!b.isEmpty()){for(var c=b.getLogs(),d=false,e="",g=0;g<c.length;g++){var f=c[g];if(f.level=="error"){d=true;e="Uncaught error detected: ["+f.className+"] "+f.msg;f.objOrErr&&aria.core.Browser.isFirefox&&h&&aria.utils.Type.isFunction(h.error)&&h.error(this.$classpath+"."+
this._currentTestName+": "+e,f.objOrErr);this.raiseFailure(e)}}b.empty();if(d&&a!=false)throw{name:this.ASSERT_FAILURE,message:e};}},assertErrorInLogs:function(a,b){var c=aria.core.Log.getAppenders()[0],d=c.getLogs(),e=false,g=[];a==null&&this.assertTrue(false,"assertErrorInLogs was called with a null error message.");if(b&&b>0){for(var f=e=0;d.length>f;f++)if(e<b&&d[f].msgId==a)e++;else g.push(d[f]);c.setLogs(g);this.assertTrue(e==b,"Expected error "+a+" found "+e+" times in logs")}else{for(f=0;d.length>
f;f++)if(d[f].msgId==a)e=true;else g.push(d[f]);c.setLogs(g);this.assertTrue(e,"Expected error not found in logs: "+a)}},assertJsonContains:function(a,b,c){this.assertTrue(aria.utils.Json.contains(a,b),c)},assertJsonEquals:function(a,b,c){this.assertTrue(aria.utils.Json.equals(a,b),c)},assertJsonNotEquals:function(a,b,c){this.assertFalse(aria.utils.Json.equals(a,b),c)},fail:function(a){var b="Forced Failure";if(a)b+=" ("+a+")";this.raiseFailure(b);throw{name:this.ASSERT_FAILURE,message:b};},hasError:function(){return this.getErrors().length>
0},getErrors:function(){return this._errors},hasWarning:function(){return false},getExecutionErrors:function(){for(var a=[],b=this.getErrors(),c=0,d=b.length;c<d;c++){var e=b[c];e.type==this.ERROR_TYPES.ERROR&&a.push(e)}return a},getFailures:function(){for(var a=[],b=this.getErrors(),c=0,d=b.length;c<d;c++){var e=b[c];e.type==this.ERROR_TYPES.FAILURE&&a.push(e)}return a},raiseError:function(a,b){var c=a.description?a.description:a.message;c="["+c+"]";if(b)c+=" "+b;this._errors.push({type:this.ERROR_TYPES.ERROR,
testMethod:this._currentTestName,description:c});this.$raiseEvent({name:"error",testClass:this.$classpath,testState:this._currentTestName,exception:a,msg:c})},raiseFailure:function(a){this._errors.push({type:this.ERROR_TYPES.FAILURE,testMethod:this._currentTestName,description:a});this.$raiseEvent({name:"failure",testClass:this.$classpath,testState:this._currentTestName,description:a})},registerObject:function(a){a.$on({"*":this._logEvent,scope:this})},unregisterObject:function(a){a.$removeListeners({"*":this._logEvent,
scope:this})},_logEvent:function(a){this.evtLogs.push(a)},assertEventFired:function(a,b){this.assertTrue(this.__hasEvent(a),b||"Event "+a+" not fired")},assertEventNotFired:function(a,b){this.assertFalse(this.__hasEvent(a),b||"Event "+a+" fired")},getEvent:function(a){for(var b=0;b<this.evtLogs.length;b++)if(this.evtLogs[b].name==a)return this.evtLogs[b];return null},__hasEvent:function(a){return this.getEvent(a)!==null},clearLogs:function(){for(;this.evtLogs.length>0;)this.evtLogs.pop()},registerExpectedEventsList:function(a){if(typeof a!=
"object")throw"registerExpectedEventsList error";this._expectedEventsList=a;this._eventIndexInList=0;if(this._expectedEventsList.length==0)this._expectedEventsList=null},checkExpectedEvent:function(a){if(this._expectedEventsList){var b=this._expectedEventsList[this._eventIndexInList],c=i(a,b);c&&this.$raiseEvent({name:"failure",testClass:this.$classpath,testState:this._currentTestName,description:"Event does not respect what was expected (expected: "+b.name+", occured: "+a.name+", unmatching property: "+
c.join(".")+")"});this._eventIndexInList++;if(this._eventIndexInList>=this._expectedEventsList.length)this._expectedEventsList=null}else this.$raiseEvent({name:"failure",testClass:this.$classpath,testState:this._currentTestName,description:"Unexpected event: "+a.name})},checkExpectedEventListEnd:function(){if(this._expectedEventsList!=null){this.$raiseEvent({name:"failure",testClass:this.$classpath,testState:this._currentTestName,description:"Not all expected events have occured. First missing event (#"+
this._eventIndexInList+"): "+this._expectedEventsList[this._eventIndexInList].name});this._expectedEventsList=null}},overrideClass:function(a,b){if(this._overriddenClasses==null)this._overriddenClasses={};var c=this._overriddenClasses[a];if(c==null){c=Aria.nspace(a);if(c==null)return;var d=a.lastIndexOf(".");c=d>-1?{clsNs:a.slice(0,d),clsName:a.slice(d+1),initialClass:c}:{clsNs:"",clsName:a,initialClass:c};this._overriddenClasses[a]=c}Aria.nspace(c.clsNs)[c.clsName]=b},resetClassOverrides:function(){if(this._overriddenClasses!=
null){for(var a in this._overriddenClasses){var b=this._overriddenClasses[a];Aria.nspace(b.clsNs)[b.clsName]=b.initialClass}this._overriddenClasses=null}},checkEvent:function(a){try{this.assertTrue(typeof a=="object"&&typeof a.name=="string"&&typeof a.src=="object"&&typeof a.src.$events=="object","The object passed to checkEvent is not an event.");var b=a.src.$events[a.name];this.assertTrue(b!=null,'The event "'+a.name+'" is not defined in '+a.src.$classpath);for(var c in a)c!="src"&&c!="name"&&this.assertTrue(b.properties[c]!=
null,'Undocumented event property "'+c+'" in '+a.name+" from "+a.src.$classpath)}catch(d){}}}})})();
//YpwKgK3gnz
//LOGICAL-PATH:aria/jsunit/ConnectionSession.js
//YpwKgK3gnz
Aria.classDefinition({$classpath:"aria.jsunit.ConnectionSession",$constructor:function(a){this.requestUrl="";this.ioResponse=this.ioRequest=null;a.ioRequest&&this.setIORequest(a.ioRequest)},$destructor:function(){this.ioResponse=this.ioRequest=null},$prototype:{setIORequest:function(a){this.ioRequest=a;this.requestUrl=a.url},setIOResponse:function(){this.ioResponse=this.ioRequest.res;this.requestUrl=this.ioRequest.url},getRequestUrl:function(){return this.requestUrl}}});
//YpwKgK3gnz
//LOGICAL-PATH:aria/jsunit/helpers/OutObj.js
//YpwKgK3gnz
Aria.classDefinition({$classpath:"aria.jsunit.helpers.OutObj",$dependencies:["aria.utils.Dom"],$singleton:true,$constructor:function(){this.testArea=aria.utils.Dom.getElementById("TESTAREA");this.store=""},$destructor:function(){this.store=this.testArea=null},$prototype:{tplCtxt:{$getId:function(a){return["testOutput",a].join("_")},evalCallback:function(a,b){return aria.jsunit.helpers.OutObj.$callback(a,b)}},write:function(a){this.store+=a},putInDOM:function(){this.testArea.innerHTML=this.store},
clearAll:function(){this.store=this.testArea.innerHTML=""},callMacro:function(){},beginSection:function(){},endSection:function(){}}});
//YpwKgK3gnz
//LOGICAL-PATH:aria/jsunit/IOViewer.js
//YpwKgK3gnz
Aria.classDefinition({$classpath:"aria.jsunit.IOViewer",$singleton:true,$constructor:function(){this._outputDiv=null;this._requests=[]},$destructor:function(){this._requests=this._outputDiv=null;aria.core.IO.$unregisterListeners(this)},$prototype:{outputDivId:"_IOViewerOutput_",run:function(){var b=Aria.$window.document,c=b.getElementById(this.outputDivId);if(c==null){c=b.createElement("div");b.body.appendChild(c)}this._outputDiv=c;aria.core.IO.$on({request:this._onRequest,response:this._onResponse,
scope:this});this._refreshDisplay()},_onRequest:function(b){this._requests[b.req.id]=b.req;this._refreshDisplay()},_onResponse:function(){this._refreshDisplay()},_refreshDisplay:function(){for(var b=['<div style="font-family:Arial;font-size:12px">','<span style="font-size:15px;font-weight:bold">IO Report</span>',"<hr/>",'<div style="padding: 3px;font-size: 12px; font-weight: bold;font-family:Arial">',"Requests: ",aria.core.IO.nbRequests," (pending: ",aria.core.IO.nbRequests-aria.core.IO.nbOKResponses-
aria.core.IO.nbKOResponses,", OK: ",aria.core.IO.nbOKResponses,", failed: ",aria.core.IO.nbKOResponses,")<br />Traffic: ",aria.core.IO.trafficDown+aria.core.IO.trafficUp," bytes (down: ",aria.core.IO.trafficDown," bytes, up: ",aria.core.IO.trafficUp," bytes)","</div>",'<table style="font-size:12px;font-family:Arial; width:100%;">','<tr style="font-weight: bold;">','<td style="width: 50px;">Method</td>',"<td>URL</td>",'<td style="text-align: right; width: 50px;">Up</td>','<td style="text-align: right; width: 50px;">Down</td>',
'<td style="text-align: right; width: 50px;">Status</td>','<td style="width: 250px;">Result</td>','<td style="width: 80px;">Duration</td>',"</tr>"],c=this._requests.length-1;c>=0;c--){var a=this._requests[c];if(a)b.push((a.res?['<tr style="',a.res.status=="200"?"color: green;":"color: red;",'">',"<td>",a.method,"</td>",'<td style="font-weight: bold;">',a.url,"</td>",'<td style="text-align: right;">',a.requestSize,"</td>",'<td style="text-align: right;">',a.responseSize,"</td>",'<td style="text-align: right;">',
a.res.status,"</td>","<td>",a.res.error?a.res.error:"OK","</td>","<td>",a.downloadTime," ms</td>"]:["<tr>","<td>",a.method,"</td>",'<td style="font-weight: bold;">',a.url,"</td>",'<td style="text-align: right;">',a.requestSize,"</td>","<td></td>","<td></td>","<td>Pending...</td>","<td></td>"]).join(""))}b.push("</table>");this._outputDiv.innerHTML=b.join("")}}});
//YpwKgK3gnz
//LOGICAL-PATH:aria/jsunit/JsCoverage.js
//YpwKgK3gnz
Aria.classDefinition({$classpath:"aria.jsunit.JsCoverage",$singleton:true,$dependencies:["aria.utils.Function","aria.jsunit.JsCoverageObject","aria.jsunit.JsCoverageReport","aria.jsunit.JsCoverageStore"],$constructor:function(){this.jsCoverageObjects=[];this.filters=[];this._reporter=new aria.jsunit.JsCoverageReport({jsCoverage:this});this.jsCoverageStore=new aria.jsunit.JsCoverageStore},$destructor:function(){this._reporter.$dispose();this.jsCoverageStore.$dispose();for(var a=0,c=this.jsCoverageObjects;a<
c;a+=1)this.jsCoverageObjects[a].$dispose()},$prototype:{extractData:function(){var a=0,c=0,b=Aria.$global._$jscoverage;if(b){for(var d in b)if(b.hasOwnProperty(d)){var e=new aria.jsunit.JsCoverageObject({data:b[d],filename:d});if(this.isCoverageObjectValid(e)){a+=e.linesCount;c+=e.coveredLinesCount;this.jsCoverageObjects.push(e)}}this.linesCount=a;this.coveredLinesCount=c;return this.jsCoverageObjects}},addFiltersFromString:function(a){var c=function(g,h){var i=h.filename.toLowerCase(),f=e.indexOf("-")!=
0;if(i.indexOf(g)!=-1)return f;return!f};a=a.split(",");for(var b=0,d=a.length;b<d;b++){var e=a[b];this.addFilter(aria.utils.Function.bind(c,this,e))}},addFiltersFromQueryString:function(){var a=aria.utils.QueryString.getKeyValue("filter");aria.utils.Type.isString(a)&&this.addFiltersFromString(a)},addFilter:function(a){this.filters.push(a)},reset:function(){this.filters=[];this.jsCoverageObjects=[]},isCoverageObjectValid:function(a){for(var c=true,b=this.filters,d=0,e=b.length;d<e;d++)(0,b[d])(a)||
(c=false);return c},refresh:function(a){this.filters=[];this.jsCoverageObjects=[];this.addFiltersFromString(a);this.extractData();this._reporter.refreshReport()},getReport:function(){return this._reporter.getReport.apply(this._reporter,arguments)},getReportForEmail:function(){return this._reporter.getReport(true)},getFilesCount:function(){return this.jsCoverageObjects.length},getLinesCount:function(){return this.linesCount},getCoverage:function(){return Math.floor(this.coveredLinesCount/this.linesCount*
100)},store:function(a){this.jsCoverageStore.store(a)}}});
//YpwKgK3gnz
//LOGICAL-PATH:aria/jsunit/JsCoverageObject.js
//YpwKgK3gnz
(function(){Aria.classDefinition({$classpath:"aria.jsunit.JsCoverageObject",$singleton:false,$statics:{sort:function(a,d){var c=a.filename.toLowerCase(),b=d.filename.toLowerCase();if(c>b)return 1;else if(c==b)return 0;return-1}},$dependencies:[],$constructor:function(a){this.filename=a.filename||"";this.source=a.source||"";this.classname=a.classname||"";this.linesCount=a.linesCount||0;this.coveredLinesCount=a.coveredLinesCount||0;(this._data=a.data)&&this.init(this._data)},$destructor:function(){},
$prototype:{init:function(a){this.source=a.source;var d=0,c=0,b;for(b in a)if(b!="source"){d++;a[b]>0&&c++}this.linesCount=d;this.coveredLinesCount=c},toString:function(){return(this.classname||this.filename)+" : "+this.getCoverage()+"%"},getCoverage:function(){return Math.floor(this.coveredLinesCount/this.linesCount*100)}}})})();
//YpwKgK3gnz
//LOGICAL-PATH:aria/jsunit/JsCoverageReport.js
//YpwKgK3gnz
(function(){Aria.classDefinition({$classpath:"aria.jsunit.JsCoverageReport",$singleton:false,$dependencies:[],$constructor:function(b){this.jsCoverage=b.jsCoverage||{};this._reportContainer=null},$destructor:function(){},$prototype:{getReport:function(b){var a=parseInt(this.jsCoverage.getCoverage()),d=this.jsCoverage.getLinesCount(),e=this.jsCoverage.getFilesCount(),f="<a href='"+this.jsCoverage.jsCoverageStore.getBaseReportsURL()+"jscoverage.html' target='_blank'>Global Coverage</a>",c=["<h2>JsCoverage report</h2><br>",
"<table style='border-collapse: collapse;font-size: small;'>","<tbody>"];b?c.push("<tr><td width='350px'><strong>"+f+"</strong> (on "+e+" files and "+d+" lines)</td>","<td><strong>",a,"%<strong></td>",'<td width="100px"><table><tbody><tr>','<td bgcolor="lime" width="'+a+'px"/>','<td bgcolor="red" width="'+(100-a)+'px"/>',"</tr></tbody></table></td></tr><br>"):c.push("<tr>","<td><strong>"+f+"</strong> (on "+e+" files and "+d+" lines)</td>","<td><strong>",a,"%</td>",'<td style="float: right;margin-right: 5px;">',
'<div style="background-color: #E00000;border: 1px solid #000000;float: right;height: 10px;margin-top: 4px;overflow: hidden;width: 100px;">','<div style="background-color: #00F000;height: 10px;width: '+a+'px;"></div>',"</div>","</td>","</tr>");c.push("</tbody>","</table>");return c.join("")},_createJsCoverageReport:function(){var b=Aria.$window.document,a=b.createElement("div");a.id="jsCoverageTableContainer";a.style.cssText="background-color: white;border: 3px solid Grey;top: 100px;bottom: 100px;left: 295px;overflow-y: auto;padding: 0 10px 10px;position: absolute;width: 600px;z-index: 1";
b.body.appendChild(a);this._reportContainer=a;this.refreshReport()},showReport:function(){this._reportContainer||this._createJsCoverageReport();this._reportContainer.style.display="block"},refreshReport:function(){this._reportContainer||this._createJsCoverageReport();this._reportContainer.innerHTML=this.getReport()},hideReport:function(){this._reportContainer||this._createJsCoverageReport();this._reportContainer.style.display="none"}}})})();
//YpwKgK3gnz
//LOGICAL-PATH:aria/jsunit/JsCoverageStore.js
//YpwKgK3gnz
Aria.classDefinition({$classpath:"aria.jsunit.JsCoverageStore",$dependencies:["aria.utils.Date","aria.core.Browser"],$statics:{baseReportsURL:"http://aria/jscoverage-reports/",baseStoreURL:"http://aria/jscoverage-store/"},$constructor:function(){this.reportDate=aria.utils.Date.format(new Date,"yyyy'_'MM'_'dd'_'hh'_'mm'_'ss");this._urlSuffix=aria.core.Browser.name.toLowerCase()+"/"+this.reportDate+"/"},$destructor:function(){},$prototype:{store:function(b){this.storeReport();b.callback&&b.callback.fn.call(b.callback.scope)},
storeReport:function(){var b=this.getBaseStoreURL();this.sendJSONReport(this.getJSONReport(),b)},getBaseStoreURL:function(){return this.baseStoreURL+this._getURLSuffix()},getBaseReportsURL:function(){return this.baseReportsURL+this._getURLSuffix()},_getURLSuffix:function(){return this._urlSuffix},sendJSONReport:function(b,f){var a;a=Aria.$global.XMLHttpRequest?new Aria.$global.XMLHttpRequest:Aria.$global.ActiveXObject?new Aria.$global.ActiveXObject("Microsoft.XMLHTTP"):void 0;a.open("POST",f,false);
a.setRequestHeader("Content-Type","application/json");a.setRequestHeader("Content-Length",b.length.toString());a.send(b);if(a.status===200||a.status===201||a.status===204)return a.responseText;else throw a.status;},getJSONReport:function(){var b=function(k){return'"'+k.replace(/[\u0000-\u001f"\\\u007f-\uffff]/g,function(g){switch(g){case "\u0008":return"\\b";case "\u000c":return"\\f";case "\n":return"\\n";case "\r":return"\\r";case "\t":return"\\t";case '"':return'\\"';case "\\":return"\\\\";default:g=
g.charCodeAt(0).toString(16);return"\\u"+("0000".substr(g.length)+g)}})+'"'},f=[],a=Aria.$global._$jscoverage;if(a)for(var h in a)if(a.hasOwnProperty(h)){for(var e=a[h],j=[],i=e.length,c=0;c<i;c++){var d=e[c];if(d===undefined||d===null)d="null";j.push(d)}e=e.source;d=[];i=e.length;for(c=0;c<i;c++)d.push(b(e[c]));f.push(b(h)+(':{"coverage":['+j.join(",")+'],"source":['+d.join(",")+"]}"))}return f="{"+f.join(",")+"}"}}});
//YpwKgK3gnz
//LOGICAL-PATH:aria/jsunit/LayoutTester.js
//YpwKgK3gnz
Aria.classDefinition({$classpath:"aria.jsunit.LayoutTester",$singleton:true,$statics:{excludeRegExp:/"^(script|noscript|style|option)$"/gi},$constructor:function(){this.elements=[]},$prototype:{captureJsonScreenshot:function(a){this.elements=[];if(!a)a=Aria.$window.document.body;this._captureJsonScreenshot(a);return this.elements},_captureJsonScreenshot:function(a){var d=this.excludeRegExp;a=a.childNodes;for(var c=0,e=a.length;c<e;c++){var b=a[c];if(b.tagName&&!d.test(b.tagName)){this._isHumanVisible(b)&&
this._saveElement(b);this._captureJsonScreenshot(b)}}},compare:function(a){if(!a)return["Array to compare is null"];var d=aria.utils.Json,c=[],e=this.elements;if(a.length!=e.length){c.push("The items number is not the same");for(var b=0,f=e.length;b<f;b++)if(!a[b]||!d.equals(e[b],a[b])){c.push("Different from item "+b);break}return c}b=0;for(f=e.length;b<f;b++)if(!a[b]||!d.equals(e[b],a[b]))c.push("Item "+b+" is different");return c},_saveElement:function(a){var d=this._getCoordinates(a),c=this._getDirectTextContent(a);
this.elements.push({id:a.id,tagName:a.tagName,top:d.top,left:d.left,width:d.width,height:d.height,text:c})},_isHumanVisible:function(a){if(a.tagName.toLowerCase()=="img")return true;if(a.style.display=="none"||a.style.visibility=="hidden")return false;var d=this._getCoordinates(a);if(d.width==0&&d.height==0)return false;if(this._hasDirectChildText(a))return true;return this._hasStyleThatMakesItVisible(a)},_hasDirectChildText:function(a){return this._getDirectTextContent(a)!=""},_hasStyleThatMakesItVisible:function(a){a=
a.currentStyle||a.ownerDocument.defaultView.getComputedStyle(a);return a.border!=""||a.borderWidth!=""||a.borderTopWidth!=""||a.borderLeftWidth!=""||a.borderBottomWidth!=""||a.borderRightWidth!=""||a.background!=""&&a.background!="none"||a.backgroundImage!=""&&a.backgroundImage!="none"||a.backgroundColor!=""&&a.backgroundColor!="transparent"},_getCoordinates:function(a){var d=a.getBoundingClientRect(),c={};c.top=Math.round(d.top);c.left=Math.round(d.left);c.width=Math.round(d.width||a.offsetWidth);
c.height=Math.round(d.height||a.offsetHeight);return c},_getDirectTextContent:function(a){if(a.tagName.toLowerCase()=="input"&&a.getAttribute("type")=="text")return a.value;a=a.childNodes;for(var d="",c=0,e=a.length;c<e;c++){var b=a[c];if(b.nodeType==3)if(b=b.textContent||b.innerText||b.nodeValue){b=b.replace(/(\r\n|[\r\n])/g,"").replace(RegExp(String.fromCharCode(160),"g")," ").replace(/^\s+|\s+$/g,"");if(b!="")d+=b}}return d}}});
//YpwKgK3gnz
//LOGICAL-PATH:aria/jsunit/ModuleCtrlTestCase.js
//YpwKgK3gnz
Aria.classDefinition({$classpath:"aria.jsunit.ModuleCtrlTestCase",$extends:"aria.jsunit.TestCase",$dependencies:["aria.jsunit.TestMsgHandler","aria.modules.RequestMgr"],$constructor:function(){this.$TestCase.constructor.call(this);this.cxLogs=[];aria.core.IOFiltersMgr.addFilter({classpath:"aria.jsunit.TestMsgHandler",initArgs:this})},$destructor:function(){aria.core.IOFiltersMgr.removeFilter({classpath:"aria.jsunit.TestMsgHandler",initArgs:this});this.evtLogs=this.cxLogs=null;this.$TestCase.$destructor.call(this)},
$prototype:{clearLogs:function(){for(;this.cxLogs.length>0;)this.cxLogs.pop().$dispose();this.$TestCase.clearLogs.apply(this)},registerController:function(a){this.registerObject(a)},assertEvent:function(a,b){this.assertEventFired(a,b||"Event "+a+" not fired")},assertLogsClean:function(a){this.assertFalse(this.__hasErrorInLogs(),a||"assertLogsClean failed")},assertLogsNotClean:function(a){this.assertTrue(this.__hasErrorInLogs(),a||"assertLogsNotClean failed")},__hasErrorInLogs:function(){for(var a=
0;a<this.evtLogs.length;a++)if(this.evtLogs[a].name=="error")return true;for(a=0;a<this.cxLogs.length;a++)if(this.cxLogs[a].ioResponse.error!=null)return true;return false}}});
//YpwKgK3gnz
//LOGICAL-PATH:aria/jsunit/NewTestRunner.js
//YpwKgK3gnz
Aria.classDefinition({$classpath:"aria.jsunit.NewTestRunner",$events:{preloadBegin:"preloadBegin",preloadEnd:"preloadEnd",campaignBegin:"campaignBegin",campaignEnd:"campaignEnd",campaignChange:"campaignChange"},$dependencies:["aria.jsunit.TestEngine","aria.jsunit.TestReport","aria.core.Log"],$constructor:function(){this._testEngine=null;this._reporter=new aria.jsunit.TestReport({testRunner:this});this.__overrideGetURLWithTimestamp();this._rootClasspath=""},$destructor:function(){this._testEngine&&
this._testEngine.$dispose();this._reporter&&this._reporter.$dispose();this._outputDiv=null},$prototype:{getReporter:function(){return this._reporter},preload:function(){this.$raiseEvent("preloadBegin");this._rootTest=Aria.getClassInstance(this._rootClasspath);if(this._rootTest.$TestSuite){this._rootTest.$on({preloadEnd:{fn:this._onPreloadEnd,scope:this}});this._rootTest.preload()}else this.$raiseEvent("preloadEnd")},_onPreloadEnd:function(){this.$raiseEvent("preloadEnd")},setRootClasspath:function(a){this._rootClasspath=
a},run:function(a,b){this.__overrideLogError();this.$raiseEvent("campaignBegin");this.getEngine().runTest(this._rootTest,b)},__overrideLogError:function(){var a=aria.core.JsObject.prototype.$logError;aria.core.JsObject.prototype.$logError=function(b,d,e){var c=aria.core.Log.prepareLoggedMessage(b,d),f=e?". Error : "+e.message:"";if(!Aria.__runtimeErrors)Aria.__runtimeErrors=[];Aria.__runtimeErrors.push(c+f);return a.apply(this,arguments)}},__overrideGetURLWithTimestamp:function(){var a=aria.core.DownloadMgr.getURLWithTimestamp;
aria.core.DownloadMgr.getURLWithTimestamp=function(b){return a.apply(aria.core.DownloadMgr,[b,true])}},_onChange:function(a){a=a.changeType;if(a=="testStart"||a=="testEnd"){this.$raiseEvent("campaignChange");this._testEngine.isFinished()&&this.$raiseEvent("campaignEnd")}},_getTestCases:function(a){var b=[];if(!a.$TestSuite)return[{classpath:a.$classpath,instance:a}];if(a.isSkipped()||a.isSelected()==-1)return[];a=a.getSubTests();for(var d=0,e=a.length;d<e;d++){var c=a[d];if(c.classpath.indexOf("TestSuite")!=
-1){c=this._getTestCases(c.instance);b=b.concat(c)}else b.push(c)}return b},getTestCases:function(){return this._getTestCases(this._rootTest)},getTestsCount:function(){return this._getTestCases(this._rootTest).length},getFinishedTests:function(){for(var a=this.getTestCases(),b=[],d=0,e=a.length;d<e;d++){var c=a[d];c.instance&&c.instance._isFinished&&b.push(c)}return b},getFinishedTestsCount:function(){return this.getFinishedTests().length},getFailedTests:function(){for(var a=this.getTestCases(),b=
[],d=0,e=a.length;d<e;d++){var c=a[d];c.instance&&c.instance.hasError()&&b.push(c)}return b},getReport:function(){return this.getReporter().getReport()},getEngineReport:function(){return this._testEngine.testReport},getEngine:function(){if(this._testEngine==null){this._testEngine=new aria.jsunit.TestEngine;this._testEngine.$on({change:this._onChange,scope:this})}return this._testEngine}}});
//YpwKgK3gnz
//LOGICAL-PATH:aria/jsunit/Robot.js
//YpwKgK3gnz
Aria.classDefinition({$classpath:"aria.jsunit.Robot",$dependencies:["aria.utils.Dom","aria.utils.AriaWindow"],$singleton:true,$constructor:function(){this._robotInitialized=false;aria.utils.AriaWindow.$on({unloadWindow:this._reset,scope:this})},$destructor:function(){this._reset();aria.utils.AriaWindow.$unregisterListeners(this)},$events:{appletInitialized:"Raised when the applet is initialized."},$statics:{INIT_CALLBACK_NAME:"AriaRobotInitCallback",BUTTON1_MASK:16,BUTTON2_MASK:8,BUTTON3_MASK:4,VK_0:48,
VK_1:49,VK_2:50,VK_3:51,VK_4:52,VK_5:53,VK_6:54,VK_7:55,VK_8:56,VK_9:57,VK_A:65,VK_ACCEPT:30,VK_ADD:107,VK_AGAIN:65481,VK_ALL_CANDIDATES:256,VK_ALPHANUMERIC:240,VK_ALT:18,VK_ALT_GRAPH:65406,VK_AMPERSAND:150,VK_ASTERISK:151,VK_AT:512,VK_B:66,VK_BACK_QUOTE:192,VK_BACK_SLASH:92,VK_BACK_SPACE:8,VK_BEGIN:65368,VK_BRACELEFT:161,VK_BRACERIGHT:162,VK_C:67,VK_CANCEL:3,VK_CAPS_LOCK:20,VK_CIRCUMFLEX:514,VK_CLEAR:12,VK_CLOSE_BRACKET:93,VK_CODE_INPUT:258,VK_COLON:513,VK_COMMA:44,VK_COMPOSE:65312,VK_CONTEXT_MENU:525,
VK_CONTROL:17,VK_CONVERT:28,VK_COPY:65485,VK_CUT:65489,VK_D:68,VK_DEAD_ABOVEDOT:134,VK_DEAD_ABOVERING:136,VK_DEAD_ACUTE:129,VK_DEAD_BREVE:133,VK_DEAD_CARON:138,VK_DEAD_CEDILLA:139,VK_DEAD_CIRCUMFLEX:130,VK_DEAD_DIAERESIS:135,VK_DEAD_DOUBLEACUTE:137,VK_DEAD_GRAVE:128,VK_DEAD_IOTA:141,VK_DEAD_MACRON:132,VK_DEAD_OGONEK:140,VK_DEAD_SEMIVOICED_SOUND:143,VK_DEAD_TILDE:131,VK_DEAD_VOICED_SOUND:142,VK_DECIMAL:110,VK_DELETE:127,VK_DIVIDE:111,VK_DOLLAR:515,VK_DOWN:40,VK_E:69,VK_END:35,VK_ENTER:10,VK_EQUALS:61,
VK_ESCAPE:27,VK_EURO_SIGN:516,VK_EXCLAMATION_MARK:517,VK_F:70,VK_F1:112,VK_F10:121,VK_F11:122,VK_F12:123,VK_F13:61440,VK_F14:61441,VK_F15:61442,VK_F16:61443,VK_F17:61444,VK_F18:61445,VK_F19:61446,VK_F2:113,VK_F20:61447,VK_F21:61448,VK_F22:61449,VK_F23:61450,VK_F24:61451,VK_F3:114,VK_F4:115,VK_F5:116,VK_F6:117,VK_F7:118,VK_F8:119,VK_F9:120,VK_FINAL:24,VK_FIND:65488,VK_FULL_WIDTH:243,VK_G:71,VK_GREATER:160,VK_H:72,VK_HALF_WIDTH:244,VK_HELP:156,VK_HIRAGANA:242,VK_HOME:36,VK_I:73,VK_INPUT_METHOD_ON_OFF:263,
VK_INSERT:155,VK_INVERTED_EXCLAMATION_MARK:518,VK_J:74,VK_JAPANESE_HIRAGANA:260,VK_JAPANESE_KATAKANA:259,VK_JAPANESE_ROMAN:261,VK_K:75,VK_KANA:21,VK_KANA_LOCK:262,VK_KANJI:25,VK_KATAKANA:241,VK_KP_DOWN:225,VK_KP_LEFT:226,VK_KP_RIGHT:227,VK_KP_UP:224,VK_L:76,VK_LEFT:37,VK_LEFT_PARENTHESIS:519,VK_LESS:153,VK_M:77,VK_META:157,VK_MINUS:45,VK_MODECHANGE:31,VK_MULTIPLY:106,VK_N:78,VK_NONCONVERT:29,VK_NUM_LOCK:144,VK_NUMBER_SIGN:520,VK_NUMPAD0:96,VK_NUMPAD1:97,VK_NUMPAD2:98,VK_NUMPAD3:99,VK_NUMPAD4:100,
VK_NUMPAD5:101,VK_NUMPAD6:102,VK_NUMPAD7:103,VK_NUMPAD8:104,VK_NUMPAD9:105,VK_O:79,VK_OPEN_BRACKET:91,VK_P:80,VK_PAGE_DOWN:34,VK_PAGE_UP:33,VK_PASTE:65487,VK_PAUSE:19,VK_PERIOD:46,VK_PLUS:521,VK_PREVIOUS_CANDIDATE:257,VK_PRINTSCREEN:154,VK_PROPS:65482,VK_Q:81,VK_QUOTE:222,VK_QUOTEDBL:152,VK_R:82,VK_RIGHT:39,VK_RIGHT_PARENTHESIS:522,VK_ROMAN_CHARACTERS:245,VK_S:83,VK_SCROLL_LOCK:145,VK_SEMICOLON:59,VK_SEPARATOR:108,VK_SHIFT:16,VK_SLASH:47,VK_SPACE:32,VK_STOP:65480,VK_SUBTRACT:109,VK_T:84,VK_TAB:9,
VK_U:85,VK_UNDEFINED:0,VK_UNDERSCORE:523,VK_UNDO:65483,VK_UP:38,VK_V:86,VK_W:87,VK_WINDOWS:524,VK_X:88,VK_Y:89,VK_Z:90},$prototype:{initRobot:function(a){if(this.applet==null){var b=Aria.$window.document,c=aria.core.DownloadMgr.resolveURL("aria/jsunit/robot-applet.jnlp"),d=b.createElement("applet"),e=b.createElement("param");e.setAttribute("name","jnlp_href");e.setAttribute("value",c);d.appendChild(e);c=b.createElement("param");c.setAttribute("name","initCallback");c.setAttribute("value",this.INIT_CALLBACK_NAME+
"();");Aria.$window[this.INIT_CALLBACK_NAME]=this._robotInitCallback;d.appendChild(c);d.setAttribute("width","1");d.setAttribute("height","1");c=aria.core.DownloadMgr.resolveURL("aria/jsunit/robot-applet.jar",true);d.setAttribute("archive",c);d.setAttribute("code","com.amadeus.ui.aria.robotapplet.RobotApplet");d.style.cssText="position:absolute;display:block;left:0px;top:0px;width:1px;height:1px;z-index:-1;";b.body.appendChild(d);this.applet=d;aria.utils.AriaWindow.attachWindow()}if(a)this._robotInitialized?
this.$callback(a):this.$onOnce({appletInitialized:a})},_robotInitCallback:function(){var a=aria.jsunit.Robot;aria.core.Timer.addCallback({scope:a,fn:a._raiseInitEvent,delay:1})},_raiseInitEvent:function(){this._robotInitialized=true;Aria.$window[this.INIT_CALLBACK_NAME]=null;this.$raiseEvent("appletInitialized")},_reset:function(){var a=this.applet;if(a!=null){var b=Aria.$window;b.document.body.removeChild(a);if(this._robotInitialized)this._robotInitialized=false;else{b[this.INIT_CALLBACK_NAME]=null;
this.$unregisterListeners()}this.applet=null;aria.utils.AriaWindow.detachWindow()}},_updateAppletPosition:function(a){var b=this.applet,c=aria.utils.Dom._getDocumentScroll();b.style.left=c.scrollLeft+"px";b.style.top=c.scrollTop+"px";this._callCallback(a)},absoluteMouseMove:function(a,b){this.applet.absoluteMouseMove(a.x,a.y);this._callCallback(b)},mouseMove:function(a,b){var c=aria.utils.Dom._getViewportSize();a.x<0||a.y<0||a.x>c.width||a.y>c.height?this.$logError("MouseMove position outside of the viewport."):
this._updateAppletPosition({fn:this._mouseMoveCb,args:{position:a,cb:b}})},_mouseMoveCb:function(a,b){var c=b.position;this.applet.mouseMove(c.x,c.y);this._callCallback(b.cb)},mousePress:function(a,b){this.applet.mousePress(a);this._callCallback(b)},mouseRelease:function(a,b){this.applet.mouseRelease(a);this._callCallback(b)},mouseWheel:function(a,b){this.applet.mouseWheel(a);this._callCallback(b)},keyPress:function(a,b){this.applet.keyPress(a);this._callCallback(b)},keyRelease:function(a,b){this.applet.keyRelease(a);
this._callCallback(b)},screenCapture:function(a,b,c){var d=aria.utils.Dom._getViewportSize();a.x<0||a.y<0||a.width<0||a.height<0||a.x+a.width>d.width||a.y+a.height>d.height?this.$logError("Screen capture area outside of the viewport."):this._updateAppletPosition({fn:this._screenCaptureCb,args:{geometry:a,imageName:b,cb:c}})},_screenCaptureCb:function(a,b){var c=b.geometry;this.applet.screenCapture(c.x,c.y,c.width,c.height,b.imageName);this.$callback(b.cb)},compareImages:function(a,b){return this.applet.compareImages(a,
b)},loadImage:function(a,b){this.applet.loadImage(a,b)},saveImage:function(a,b){this.applet.saveImage(a,b)},_callCallback:function(a){aria.core.Timer.addCallback({fn:this.$callback,scope:this,args:a,delay:10})},getWin32Api:function(){return this.applet.getWin32Api()}}});
//YpwKgK3gnz
//LOGICAL-PATH:aria/jsunit/ScreenCapture.js
//YpwKgK3gnz
Aria.classDefinition({$classpath:"aria.jsunit.ScreenCapture",$dependencies:["aria.jsunit.AppletWorker"],$singleton:true,$constructor:function(){this._applet=aria.jsunit.AppletWorker},$destructor:function(){this._applet=null;delete this._applet},$statics:{MISSING_APPLET_WORKER:"[Aria JsUnit] Missing applet communication bridge in %1"},$prototype:{_prepareInstructionString:function(a,b,c,d,e,f,g){return[a,Aria.$frameworkWindow.document.title,b,c||0,d||0,e||0,f||0,g||0].join(";")},capture:function(a){if(this._applet.isReady()){var b=
a.conf;this._applet.sendInstruction({instruction:this._prepareInstructionString("CAPTURE",a.useCaseName,b.x,b.y,b.width,b.height,b.threshold),cb:a.oncomplete,scope:a.scope,args:a.args});return true}else{this.$logWarn(this.MISSING_APPLET_WORKER,this.$classpath);(a=Aria.$global.console)&&a.warn("Missing applet communication bridge in aria.jsunit.ScreenCapture");return false}},getResponse:function(){if(this._applet.isReady())return this._applet.getResponse();else{this.$logError(this.MISSING_APPLET_WORKER,
this.$classpath);return{code:1,reason:"Missing applet worker"}}}}});
//YpwKgK3gnz
//LOGICAL-PATH:aria/jsunit/SikuliTestCase.js
//YpwKgK3gnz
Aria.classDefinition({$classpath:"aria.jsunit.SikuliTestCase",$extends:"aria.jsunit.TestCase",$dependencies:["aria.jsunit.Robot"],$statics:{settings:{browserPath:""},FAILED_OPENING_BROWSER:"The browser could not be opened. Command line used: %1"},$constructor:function(){this.$TestCase.constructor.call(this);this.imagesRoot=aria.core.DownloadMgr.resolveURL(this.$package.replace(/\./g,"/",true))+"/";this.Key=this.KeyModifier=this.screen=this.robot=null},$destructor:function(){this.Key=this.KeyModifier=
this.screen=this.robot=null;this.$TestCase.$destructor.call(this)},$prototype:{testAsyncRunSikuliTest:function(){aria.jsunit.Robot.initRobot({fn:this._robotStarted,scope:this})},_robotStarted:function(){this.robot=aria.jsunit.Robot.applet;this.screen=this.robot.createSikuliScreen();this.KeyModifier=this.robot.Packages.org.sikuli.script.KeyModifier;this.Key=this.robot.Packages.org.sikuli.script.Key;try{this.runSikuliTest()}catch(a){this.handleAsyncTestError(a)}},image:function(a){return this.robot.createPattern(this.imagesRoot+
a)},runSikuliTest:function(){this.sikuliTestEnd()},sikuliTestEnd:function(){this.notifyTestEnd("testAsyncRunSikuliTest")},openURL:function(a){a=this.settings.browserPath.replace(/\%url\%/,a);if(this.robot.createApp(a).open()==null){this.$logError(this.FAILED_OPENING_BROWSER,[a]);return false}return true}}});
//YpwKgK3gnz
//LOGICAL-PATH:aria/jsunit/SonarReport.js
//YpwKgK3gnz
Aria.classDefinition({$classpath:"aria.jsunit.SonarReport",$dependencies:["aria.core.Browser"],$statics:{REPORT_SEPARATOR:"###__REPORT__DELIMITER__###",LINE_SEPARATOR:"####",TAB_SEPARATOR:"#TT#"},$constructor:function(a){this.testRunner=a.testRunner;this.__browserInfo=aria.core.Browser.toString().replace(/ /g,"_").replace(/\./g,"")+"_"+aria.core.Browser.environment+"."},$destructor:function(){this.testRunner=null},$prototype:{getReport:function(){var a="";a=[];for(var d=this.testRunner.getTestCases(),
b=0,c=d.length;b<c;b++)a.push(this.__getTestCaseReport(d[b].instance));return a=a.join(this.REPORT_SEPARATOR)},__getTestCaseReport:function(a){return this.__formatTestCaseReport(a)},__getTestSuiteName:function(a){return this.__browserInfo+a.$classpath},__formatTestCaseReport:function(a){var d=["<?xml version='1.0' encoding='UTF-8' ?>"],b=this.__getTestCaseSubTests(a);a.getErrors();d.push(["<testsuite","name='"+this.__getTestSuiteName(a)+"'","errors='"+a.getExecutionErrors().length+"'","failures='"+
a.getFailures().length+"'","tests='"+b.length+"'","skipped='0'","time='"+a.getExecutionTime()/1E3+"'",">"].join(" "));for(var c=0,e=b.length;c<e;c++){var f=this.__formatSubTestReport(b[c],a);d.push(f)}d.push("</testsuite>");return d.join(this.LINE_SEPARATOR)},__getTestCaseSubTests:function(a){var d=[],b=a.getErrors(),c;for(c in a)if(c.match(/^test/)&&typeof a[c]=="function"){for(var e={name:c,status:"success",time:0,errors:[]},f=0,g=b.length;f<g;f++){var h=b[f];if(e.name+"()"==h.testMethod){e.status=
"error";e.errors.push(h)}}d.push(e)}return d},__formatSubTestReport:function(a,d){var b="",c=a.errors;if(c.length>0){b=this.TAB_SEPARATOR+"<testcase classname='"+this.__getTestSuiteName(d)+"' time='"+a.time+"' name='"+a.name+"'>";for(var e=0,f=c.length;e<f;e++){var g=c[e];b+=this.LINE_SEPARATOR+this.TAB_SEPARATOR+this.TAB_SEPARATOR;b+=g.state=="failure"?"<failure>"+g.description+"</failure>":"<error>"+g.description+"</error>"}b+=this.LINE_SEPARATOR+this.TAB_SEPARATOR+"</testcase>"}else b=this.TAB_SEPARATOR+
"<testcase classname='"+d.$classpath+"' time='"+a.time+"' name='"+a.name+"'/>";return b}}});
//YpwKgK3gnz
//LOGICAL-PATH:aria/jsunit/SynEvents.js
//YpwKgK3gnz
Aria.classDefinition({$classpath:"aria.jsunit.SynEvents",$singleton:true,$dependencies:["aria.jsunit.Robot"],$constructor:function(){this._robot=aria.jsunit.Robot},$destructor:function(){this._robot=null},$prototype:{_keys:{CTRL:"CONTROL","\t":"TAB"," ":"SPACE","\u0008":"BACK_SPACE","\r":"ENTER","*":"MULTIPLY","+":"PLUS","-":"MINUS",".":"PERIOD","/":"SLASH",";":"SEMICOLON",":":"COLON","=":"EQUALS",",":"COMMA","`":"BACK_QUOTE","\\":"BACK_SLASH","'":"QUOTE",'"':"QUOTEDBL","(":"LEFT_PARENTHESIS",")":"RIGHT_PARENTHESIS"},
_methods:{initRobot:0,mouseMove:1,absoluteMouseMove:1,mousePress:1,mouseRelease:1,mouseWheel:1,keyPress:1,keyRelease:1,screenCapture:2,ensureVisible:1,focus:1,pause:1,click:1,type:2,move:2,drag:2,elementCapture:2,execute:1},execute:function(a,b){this._executeCb(0,{array:a,curIdx:0,cb:b})},_executeCb:function(a,b){var e=b.array,d=b.curIdx;if(b.curIdx>=e.length)this.$callback(b.cb);else{e=e[d];b.curIdx++;if(aria.utils.Type.isArray(e)){d=e.shift();var f=this._methods[d];if(f==null)this.$logError("Bad action");
else if(f!=e.length)this.$logError("Bad number of parameters");else{e[f]={fn:this._executeCb,scope:this,args:b};f=this[d]?this:this._robot;f[d].apply(f,e)}}else this.$logError("Not an array")}},ensureVisible:function(a,b){a=this._resolveHTMLElement(a);aria.utils.Dom.scrollIntoView(a);this.$callback(b)},focus:function(a,b){a=this._resolveHTMLElement(a);a.focus();this.$callback(b)},pause:function(a,b){aria.core.Timer.addCallback({fn:this.$callback,scope:this,args:b,delay:a})},click:function(a,b){a=
this._resolvePosition(a);a!=null&&this.execute([["mouseMove",a],["mousePress",this._robot.BUTTON1_MASK],["pause",100],["mouseRelease",this._robot.BUTTON1_MASK]],b)},type:function(a,b,e){var d=[];if(a){a=this._resolveHTMLElement(a);d.push(["focus",a])}a=b.match(/(\[[^\]]+\])|([^\[])/g);b=0;for(var f=a.length;b<f;b++){var c=a[b],g=false,h=true,i=true;if(c.length>1){c=c.substr(1,c.length-2).toUpperCase();if(/^<.*>$/.test(c))i=false;else if(/^>.*<$/.test(c))h=false;h&&i||(c=c.substr(1,c.length-2));c=
c.replace(/-/g,"_")}else{g=c!=c.toLowerCase();c=c.toUpperCase()}var j=this._keys[c];if(j!=null)c=j;c=this._robot["VK_"+c];if(c==null)this.$logError("Unknown key: %1",[a[b]]);else{g&&d.push(["keyPress",this._robot.VK_SHIFT]);h&&d.push(["keyPress",c]);i&&d.push(["keyRelease",c]);g&&d.push(["keyRelease",this._robot.VK_SHIFT])}}this.execute(d,e)},move:function(a,b,e){var d=a.duration||1E3;a=a.to;a=this._resolvePosition(a);b=b?this._resolvePosition(b):a;if(!(b==null||a==null)){var f=[],c=0;for(d/=40;c<
d;c++){var g=c/d;f.push(["mouseMove",{x:(1-g)*b.x+g*a.x,y:(1-g)*b.y+g*a.y}])}f.push(["mouseMove",a]);this.execute(f,e)}},drag:function(a,b,e){var d=a.to;d=this._resolvePosition(d);b=b?this._resolvePosition(b):d;b==null||d==null||this.execute([["mouseMove",b],["mousePress",this._robot.BUTTON1_MASK],["move",a,b],["mouseRelease",this._robot.BUTTON1_MASK]],e)},_resolvePosition:function(a){var b=aria.utils.Dom;if(aria.utils.Type.isString(a))a=this._resolveHTMLElement(a);if(aria.utils.Type.isHTMLElement(a)){a=
b.getGeometry(a);a={x:a.x+a.width/2,y:a.y+a.height/2}}else if(!(a.hasOwnProperty("x")&&a.hasOwnProperty("y"))){this.$logError("Invalid position.");return null}return a},elementCapture:function(a,b,e){a=this._resolveHTMLElement(a);a!=null&&this._robot.screenCapture(this._resolveGeometry(a),b,e)},_resolveGeometry:function(a){var b=aria.utils.Dom;if(aria.utils.Type.isString(a))a=this._resolveHTMLElement(a);if(aria.utils.Type.isHTMLElement(a))a=b.getGeometry(a);else if(!(a.hasOwnProperty("x")&&a.hasOwnProperty("y")&&
a.hasOwnProperty("width")&&a.hasOwnProperty("height"))){this.$logError("Invalid position.");return null}return a},_resolveHTMLElement:function(a){if(aria.utils.Type.isString(a)){a=aria.utils.Dom.getElementById(a);if(a==null){this.$logError("HTML element was not found.");return null}}else if(!aria.utils.Type.isHTMLElement(a)){this.$logError("Invalid HTML element.");return null}return a}}});
//YpwKgK3gnz
//LOGICAL-PATH:aria/jsunit/TemplateTestCase.js
//YpwKgK3gnz
Aria.classDefinition({$classpath:"aria.jsunit.TemplateTestCase",$extends:"aria.jsunit.TestCase",$constructor:function(){this.$TestCase.constructor.call(this);this.env={template:this.$classpath+"Tpl",moduleCtrl:null,data:{}};this.templateCtxt=null;this.testDiv=aria.utils.Dom.getElementById(this.TEMPLATE_DIV);this._started=false},$statics:{TEMPLATE_DIV:"TESTAREA"},$destructor:function(){this.testDiv.style.height="0";this.templateCtxt=this.testDiv=null;this.__cleanEnv(true);this.$TestCase.$destructor.call(this)},
$dependencies:["aria.utils.SynEvents","aria.templates.RefreshManager"],$onload:function(){this.synEvent=aria.utils.SynEvents},$onunload:function(){this.synEvent=null},$prototype:{needVisibleDocument:true,setTestEnv:function(a){for(var b in a)if(a.hasOwnProperty(b))this.env[b]=a[b]},testAsyncStartTemplateTest:function(){this.testDiv.style.height="1000px";Aria.$window.scroll(0,0);this._loadTestTemplate({fn:this._startTests,scope:this})},_startTests:function(){this._started=true;this.runTemplateTest()},
_loadTestTemplate:function(a){Aria.loadTemplate({classpath:this.env.template,div:this.TEMPLATE_DIV,data:this.env.data,moduleCtrl:this.env.moduleCtrl,provideContext:true},{fn:this._templateLoadCB,scope:this,args:{cb:a}})},_disposeTestTemplate:function(){Aria.disposeTemplate(this.TEMPLATE_DIV);this.templateCtxt=null;this._started=false},_replaceTestTemplate:function(a,b){aria.core.Timer.addCallback({fn:function(){this._disposeTestTemplate();this.__cleanEnv();this.setTestEnv(a);this._loadTestTemplate(b)},
scope:this})},_refreshTestTemplate:function(){this.templateCtxt.$refresh()},_templateLoadCB:function(a,b){this.templateCtxt=a.tplCtxt;var c=b.cb;if(a.success)this.templateCtxt.isReady()?this.$callback(c):this.templateCtxt.$onOnce({Ready:{fn:function(d,e){if(!this._started)if(e){e.delay=50;aria.core.Timer.addCallback({fn:function(f){this.$callback(f)},scope:this,args:e})}},scope:this,args:c}});else this.$callback(c)},runTemplateTest:function(){},notifyTemplateTestEnd:function(){aria.core.Timer.addCallback({fn:function(){this._disposeTestTemplate();
aria.templates.CSSMgr.reset();try{this.testDiv.style.height="0";this.notifyTestEnd("testAsyncStartTemplateTest")}catch(a){this.handleAsyncTestError(a)}},scope:this,delay:50})},getElementById:function(a,b,c,d){d=d||aria.utils.Dom;var e=c||this.templateCtxt;c=e.$getId(a);c=d.getElementById(c);if(b&&!c){b=[];this.__retrieveDirectSubTemplates(e,b);e=0;for(var f=b.length;e<f;e++)if(c=this.getElementById(a,true,b[e],d))break}return c},__retrieveDirectSubTemplates:function(a,b){for(var c=(a.$TemplateCtxt?
a._mainSection:a)._content,d=0,e=c.length;d<e;d++)if(c[d].behavior&&c[d].behavior.subTplCtxt)b.push(c[d].behavior.subTplCtxt);else c[d]._content&&this.__retrieveDirectSubTemplates(c[d],b)},getInputField:function(a){a=this.getWidgetInstance(a);return a.getTextInputField?a.getTextInputField():a.getDom()?a.getDom().getElementsByTagName("input")[0]:null},getWidgetDomElement:function(a,b){return this.getWidgetInstance(a).getDom().getElementsByTagName(b)[0]},getMultiSelectIcon:function(a){a=this.getWidgetInstance(a);
a.getDom();return a._frame.getIcon?a._frame.getIcon("dropdown"):null},getWidgetDropDownPopup:function(a){a=this.getWidgetInstance(a);if(a._dropdownPopup)return a._dropdownPopup.domElement},getSortIndicator:function(a){a=this.getWidgetInstance(a);a.getDom();return a?a._domElt:null},getWidgetInstance:function(a){return this.getWidgetInstanceInRefreshMgr(aria.templates.RefreshManager,a)},getWidgetInstanceInRefreshMgr:function(a,b){a.updateHierarchies();for(var c=a.getHierarchies(),d=0;d<c.length;d++){var e=
this._findInHierarchy(c[d],b);if(e)return e}},getWidgetInstanceInIframe:function(a,b){return this.getWidgetInstanceInRefreshMgr(a.contentWindow.aria.templates.RefreshManager,b)},getLink:function(a){return this.getWidgetDomElement(a,"a")},_findInHierarchy:function(a,b,c){var d=false;if(a.type=="template"){c=a.elem;d=true}else if(a.type=="templateWidget"){c=a.elem.behavior?a.elem.behavior.subTplCtxt:a.elem.subTplCtxt;d=true}if(d)if(d=c.getBehaviorById(b))return d;if(a.content)for(var e=0;e<a.content.length;e++){d=
this._findInHierarchy(a.content[e],b,c);if(d!=null)return d}return null},assertTrue:function(a,b){try{this.$TestCase.assertTrue.apply(this,[a,b])}catch(c){this.handleAsyncTestError(c,false)}},end:function(){this.notifyTemplateTestEnd()},clickAndType:function(a,b,c,d){this.synEvent.click(this.getInputField(a),{fn:this.__afterClick,scope:this,args:[a,b,c,d]})},__afterClick:function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3];this.synEvent.type(this.getInputField(c),d,{fn:this.__afterType,scope:this,args:[c,
d,e,f]})},__afterType:function(a,b){var c=b[0],d=b[2];if(b[3]===false)this.$callback(d);else{this.getInputField(c).blur();this.synEvent.click(Aria.$window.document.body,d)}},__cleanEnv:function(a){var b=Aria.getClassRef(this.env.template);b&&b.classDefinition.$hasScript&&aria.core.ClassMgr.unloadClass(this.env.template+"Script");aria.core.ClassMgr.unloadClass(this.env.template);a&&this.env.moduleCtrl&&this.env.moduleCtrl.classpath&&aria.core.ClassMgr.unloadClass(this.env.moduleCtrl.classpath)},computeZIndex:function(a){for(var b=
Aria.$window.document.body;a&&a!=b;){var c=a.style.zIndex;if(c)return parseInt(c,10);a=a.parentNode}return null}}});
//YpwKgK3gnz
//LOGICAL-PATH:aria/jsunit/TemplateUITestCase.js
//YpwKgK3gnz
Aria.classDefinition({$classpath:"aria.jsunit.TemplateUITestCase",$extends:"aria.jsunit.TemplateTestCase",$constructor:function(){this.$TemplateTestCase.constructor.call(this);this.screenCapture=aria.jsunit.ScreenCapture},$dependencies:["aria.jsunit.ScreenCapture"],$prototype:{capture:function(b,a){this.screenCapture.capture({useCaseName:b,conf:{x:a.x?a.x:0,y:a.y?a.y:0,width:a.width?a.width:800,height:a.height?a.height:200,threshold:0},oncomplete:this._onCaptureDone,scope:this,args:{cb:a.fn,scope:a.scope}})||
a.fn.call(a.scope)},_onCaptureDone:function(b){this.assertTrue("0"===this.screenCapture.getResponse().code,"Images are different");b.cb.call(b.scope)}}});
//YpwKgK3gnz
//LOGICAL-PATH:aria/jsunit/Test.js
//YpwKgK3gnz
Aria.classDefinition({$classpath:"aria.jsunit.Test",$events:{failure:{description:"raised when a failure occurs (failures are expected and correspond to wrong assertions)",properties:{testClass:"{String} classpath of the current test",testState:"{String} name of the current state in the test (method name)",description:"{String} failure description"}},error:{description:"raised when an error occurs (error are uncaught exception)",properties:{testClass:"{String} classpath of the current test",testState:"{String} name of the current state in the test (method name)",
exception:"{Error} error object caught by the test",msg:"{String} optional message associated to this error"}},stateChange:{description:"raised when the test moves to a new test method",properties:{testClass:"{String} classpath of the current test",testState:"{String} name of the current state in the test (method name)"}},start:{description:"raised when a test starts",properties:{testObject:"{Object) the test object",testClass:"{String} classpath of the current test"}},end:{description:"raised when the test ends",
properties:{testObject:"{Object) the test object",testClass:"{String} classpath of the current test",nbrOfAsserts:"{Integer} number of asserts evaluated during the test"}},testLoad:{description:"raised when a test loads a sub-test",properties:{testLoader:"{Object) the test object that loads the sub-test",testObject:"{Object) the test object which has been loaded"}},preloadEnd:{description:"Raised when the class of the Test is preloaded, with its dependencies and sub tests",properties:{testSuite:"{Object) the test object that loads the sub-test"}}},
$constructor:function(){this._isFinished=false;this._parentTest=null;this._executionTime=-1;this._errors=[];this.$JsObject.constructor.call(this)},$destructor:function(){this._parentTest=null;var a=Aria.getClassRef(this.$classpath);aria.core.ClassMgr.unloadClass(this.$classpath);if(a&&a.classDefinition&&a.classDefinition.$dependencies){a=a.classDefinition.$dependencies;for(var b=0,c=a.length;b<c;b+=1)a[b].substring(0,5)=="test."&&aria.core.ClassMgr.unloadClass(a[b])}this.$JsObject.$destructor.call(this)},
$prototype:{run:function(){},_startTest:function(){this._timestampBegin=(new Date).getTime()},_endTest:function(){this._timestampEnd=(new Date).getTime();this._executionTime=this._timestampEnd-this._timestampBegin},getExecutionTime:function(){return this._executionTime},setParentTest:function(a){this._parentTest=a},getParentTest:function(){return this._parentTest},isFinished:function(){return this._isFinished===true},getFinishedTestsCount:function(){return this._testPassed},init:function(){this.$raiseEvent({name:"preloadEnd",
testSuite:this})}}});
//YpwKgK3gnz
//LOGICAL-PATH:aria/jsunit/TestacularReport.js
//YpwKgK3gnz
Aria.classDefinition({$classpath:"aria.jsunit.TestacularReport",$dependencies:["aria.utils.Json"],$singleton:true,$constructor:function(){var a=Aria.$frameworkWindow,b;if(a.parent!==a)b=a.parent.testacular;this._testacular=b;if(b==null)this.attachTest=Aria.empty;this._testEngine=null},$dispose:function(){this._testEngine&&this.detachTestEngine(this._testEngine);this._testacular=null},$statics:{SEVERAL_TEST_ENGINES:"Attaching several test engines to the TestacularReport is not supported."},$prototype:{isTestacularEnabled:function(){return this._testacular!=
null},_onChange:function(a){var b=a.changeType,e=this._testEngine,c=e.getCurrentTest(),d=null;if(a.changeType=="failure")d=c.failures;else if(a.changeType=="error")d=c.errors;d&&this._testacular.error({type:b,testClass:c.testClass,details:d[d.length-1]});if(e.isFinished()){a=this.createFinalReport(a.testReport);this._testacular.updateResult(a);this._testacular.complete(a.totalNbrOfErrors==0&&a.totalNbrOfFailures==0)}else this._testacular.updateStatus(this.createStatusReport(a.testReport,c))},attachTestEngine:function(a){if(this._testacular)if(a!==
this._testEngine){if(this._testEngine){this.$logError(this.SEVERAL_TEST_ENGINES);this.detachTestEngine(this._testEngine)}this._testEngine=a;a.$on({change:this._onChange,scope:this})}},detachTestEngine:function(a){if(this._testEngine==a){a.$unregisterListeners(this);this._testEngine=null}},createStatusReport:function(a,b){return{totalNbrOfAsserts:a.totalNbrOfAsserts,totalNbrOfErrors:a.totalNbrOfErrors,totalNbrOfFailures:a.totalNbrOfFailures,currentTest:{testClass:b.testClass,state:b.state,processingState:b.processingState}}},
createFinalReport:function(a){a=aria.utils.Json.copy(a,false);a.executionTime=a.instance.getExecutionTime();delete a.instance;delete a.state;delete a.processingState;a.errors||delete a.errors;a.failures||delete a.failures;delete a.retryURL;var b=a.subTests;if(b){for(var e=[],c=0,d=b.length;c<d;c++)e[c]=this.createFinalReport(b[c]);a.subTests=e}else delete a.subTests;return a}}});
//YpwKgK3gnz
//LOGICAL-PATH:aria/jsunit/TestCase.js
//YpwKgK3gnz
Aria.classDefinition({$classpath:"aria.jsunit.TestCase",$extends:"aria.jsunit.Assert",$dependencies:["aria.core.Sequencer","aria.utils.Json"],$statics:{defaultTestTimeout:6E4},$constructor:function(){this.$Assert.constructor.call(this);this._sequencer=null;this._currentTaskId=-1;this.skipTest=false;this._testPassed=this._testsCount=0;this.__appEnv={}},$destructor:function(){this._sequencer&&this._sequencer.$dispose();this.$Assert.$destructor.call(this);this._currentTaskId=null},$prototype:{run:function(){this._saveAppEnvironment();
this._startTest();this._sequencer=new aria.core.Sequencer;if(!this.skipTest)for(var a in this)if(a.match(/^test/)&&typeof this[a]=="function"){var b=a.match(/^testAsync/)!=null;this._sequencer.addTask({name:a,fn:this._execTestTask,scope:this,asynchronous:b});this._testsCount++}this._sequencer.$on({end:this._onSequenceEnd,scope:this});this._sequencer.start()},waitFor:function(a){var b=a.delay||250,c=a.condition,d=function(){this.$callback(c)?this.$callback(a.callback):aria.core.Timer.addCallback({fn:d,
scope:this,delay:b})};aria.core.Timer.addCallback({fn:d,scope:this,delay:b})},_execTestTask:function(a){var b=a.name;this._updateAssertInfo(b+"()");var c=false;try{this._currentTaskId=a.id;this.setUp&&this.setUp();a.asynchronous&&this.setTestTimeout(this.defaultTestTimeout,b);try{this[b].call(this)}catch(d){d.name!=this.ASSERT_FAILURE&&this.raiseError(d);c=true}}catch(e){this.raiseError(e,"Error location: setUp() method");c=true}if(a.asynchronous!=true||c)this.notifyTestEnd(b,c,a.asynchronous==true)},
setTestTimeout:function(a,b){this._timeoutTimer&&aria.core.Timer.cancelCallback(this._timeoutTimer);this._timeoutTimer=aria.core.Timer.addCallback({fn:this.handleAsyncTestError,scope:this,delay:a,args:Error("Assert "+b+" has timed out")})},notifyTestEnd:function(a,b,c){if(this._timeoutTimer){aria.core.Timer.cancelCallback(this._timeoutTimer);this._timeoutTimer=null}this.checkExpectedEventListEnd();this.assertLogsEmpty(false);this.clearLogs();try{this.tearDown&&this.tearDown()}catch(d){this.raiseError(d,
"Error location: tearDown() method")}this._restoreAppEnvironment();a=Aria.__undisposedObjects;for(var e in a)if(a.hasOwnProperty(e)&&a[e]["aria:createdFromTest"]==null)a[e]["aria:createdFromTest"]=this.$classpath+"."+this._currentTestName;aria.core.Timer.callbacksRemaining();c!=false&&this._sequencer&&this._sequencer.notifyTaskEnd(this._currentTaskId)},callAsyncMethod:function(a,b,c,d){d={cb:d,testName:this._currentTestName};a[b]==null&&this.raiseError(Error("Object "+a+"has no method called '"+b+
"'"));aria.utils.Type.isFunction(a[b])||this.raiseError(Error("Method '"+b+"' in "+a+" is not a Function"));try{c.push({fn:"_callAsyncMethodCb",scope:this,args:d});a[b].apply(a,c)}catch(e){this.handleAsyncTestError(e,false);this.notifyTestEnd(this._currentTestName)}},_callAsyncMethodCb:function(a,b){try{this.$callback(b.cb,a)}catch(c){this.handleAsyncTestError(c,false)}this.notifyTestEnd(b.testName)},_onSequenceEnd:function(){if(this._sequencer){this._sequencer.$dispose();this._sequencer=null}this._testPassed++;
this._endTest();this._currentTaskId=-1},handleAsyncTestError:function(a,b){a.name!=this.ASSERT_FAILURE&&this.raiseError(a);b!==false&&this.notifyTestEnd(this._currentTestName)},_saveAppEnvironment:function(){this.__appEnv=aria.utils.Json.copy(aria.core.AppEnvironment.applicationSettings)},_restoreAppEnvironment:function(){aria.core.AppEnvironment.setEnvironment(aria.utils.Json.copy(this.__appEnv))}}});
//YpwKgK3gnz
//LOGICAL-PATH:aria/jsunit/TestCommunicator.js
//YpwKgK3gnz
Aria.classDefinition({$classpath:"aria.jsunit.TestCommunicator",$constructor:function(a){this.id=a.id;this.content="";this.init(a)},$destructor:function(){},$prototype:{init:function(a){var c=Aria.$window.document,b=c.createElement("div");b.style.cssText="display:block;visibility:visible;height:1px;width:1px;overflow:hidden";b.id=this.id;c.body.appendChild(b);this.content=a=a.content;b.appendChild(c.createTextNode(a))}}});
//YpwKgK3gnz
//LOGICAL-PATH:aria/jsunit/TestEngine.js
//YpwKgK3gnz
Aria.classDefinition({$classpath:"aria.jsunit.TestEngine",$dependencies:["aria.utils.Type"],$events:{change:{description:"raised when some data have changed in the test report",properties:{testReport:"{Object} the test report object",changeType:"{Enum} error | failure | testStart | testEnd | testProcessingState"}}},$constructor:function(){this.testReport=null;this._testStack=[];this._currentTest=null;this.runIsolated=this._isFinished=false},$destructor:function(){this.testReport=null},$prototype:{runTest:function(a,
b){this.skipTests=b;this._registerAsListener(a);a.run()},_onFailure:function(a){if(this._currentTest.failures==null)this._currentTest.failures=[];this._currentTest.failures.push({testState:a.testState,description:a.description});a=this._testStack.length;for(var b=0;a>b;b++)this._testStack[b].totalNbrOfFailures++;this._raiseChange("failure")},_onError:function(a){if(this._currentTest.errors==null)this._currentTest.errors=[];this._currentTest.errors.push({testState:a.testState,description:a.msg,exception:a.exception});
a=this._testStack.length;for(var b=0;a>b;b++)this._testStack[b].totalNbrOfErrors++;this._raiseChange("error")},_onTestLoad:function(a){a=a.testObject;if(this.skipTests!=null&&aria.utils.Array.contains(this.skipTests,a.$classpath))a.skipTest=true;this._registerAsListener(a)},_onTestStart:function(a){a={testClass:a.testObject.$classpath,instance:a.testObject,totalNbrOfFailures:0,totalNbrOfErrors:0,totalNbrOfAsserts:0,state:"processing",processingState:"",subTests:null,failures:null,errors:null,retryURL:this._getRetryTestUrl(a.testObject.$classpath)};
var b=this._testStack.length;if(b==0){this._testStack.push(a);this.testReport=a}else{b=this._testStack[b-1];if(b.subTests==null)b.subTests=[];b.subTests.push(a);this._testStack.push(a)}this._currentTest=a;this._raiseChange("testStart")},_onTestEnd:function(a){a.testObject.$unregisterListeners(this);this._currentTest.processingState="";this._currentTest.state=a.testObject.skipTest?"skipped":"done";if(a.nbrOfAsserts)this._currentTest.totalNbrOfAsserts+=a.nbrOfAsserts;this._testStack.pop();a=this._testStack.length;
if(a>0)this._currentTest=this._testStack[a-1];else{this._currentTest=null;this._isFinished=true}this._raiseChange("testEnd")},isFinished:function(){return this._isFinished===true},_onStateChange:function(a){this._currentTest.processingState=a.testState;this._raiseChange("testProcessingState")},_registerAsListener:function(a){if(this.runIsolated&&aria.utils.Type.isInstanceOf(a,"aria.jsunit.TestSuite"))a.runIsolated=true;a.$on({failure:this._onFailure,error:this._onError,start:this._onTestStart,end:this._onTestEnd,
stateChange:this._onStateChange,testLoad:this._onTestLoad,scope:this})},_raiseChange:function(a){this.$raiseEvent({name:"change",testReport:this.testReport,changeType:a})},_getRetryTestUrl:function(a){var b=aria.utils.QueryString;b.getKeyValue("testClasspath");b=b.keyValues;b.testClasspath=a;a=[];for(var c in b)!b.hasOwnProperty(c)||c=="store"||a.push([c,b[c]].join("="));c="?"+a.join("&");a=Aria.$frameworkWindow;b=a.location.href.replace(/#$/,"");b=b.replace(a.location.search,"");b+=c;return b},getCurrentTest:function(){return this._currentTest}}});
//YpwKgK3gnz
//LOGICAL-PATH:aria/jsunit/TestMsgHandler.js
//YpwKgK3gnz
(function(){var c=0;Aria.classDefinition({$classpath:"aria.jsunit.TestMsgHandler",$extends:"aria.core.IOFilter",$dependencies:["aria.jsunit.ConnectionSession"],$constructor:function(a){this.$IOFilter.constructor.call(this);this._metaData=this.CONNECTION_SESSION_METADATA+c;c++;this.cxLogs=[];a.cxLogs=this.cxLogs},$destructor:function(){this.cxLogs=null;this.$IOFilter.$destructor.call(this)},$statics:{CONNECTION_SESSION_METADATA:"aria.jsunit.TestMsgHandler:connectionSession"},$prototype:{onRequest:function(a){var b=
a.sender;if(b&&b.classpath=="aria.modules.RequestMgr"){this.$assert(38,b[this._metaData]==null);a=new aria.jsunit.ConnectionSession({ioRequest:a});b[this._metaData]=a;this.cxLogs.push(a)}},onResponse:function(a){if(a=a.sender)(a=a[this._metaData])&&a.setIOResponse()}}})})();
//YpwKgK3gnz
//LOGICAL-PATH:aria/jsunit/TestReport.js
//YpwKgK3gnz
(function(){Aria.classDefinition({$classpath:"aria.jsunit.TestReport",$singleton:false,$dependencies:[],$constructor:function(a){this.testRunner=a.testRunner},$destructor:function(){this.testRunner=null},$prototype:{getReport:function(){for(var a=this.testRunner.getErrors(),b=["Aria templates test campaign completed<br>","<h2>Error report</h2>",this.getErrorSummary(),"<ul>"].join("<br>"),c=0,d=a.length;c<d;c++){var e=this.getErrorReport(a[c]);b+=e}b+="</ul><br>";return b},getErrorSummary:function(){var a=
this.testRunner.getErrors(),b="";return b=a.length==0?'<b><font color="green">No test failed !</font></b>':a.length==1?"<b>1 test failed :</b>":"<b>"+a.length+" tests failed :</b>"},getErrorReport:function(a){var b=a.messages;a='<li><a href="'+a.retryURL+'">'+a.testClass+"</a></li><li> Error"+(b.length>1?"s":"")+" : <ul>";for(var c=0,d=b.length;c<d;c++)a+="<li>"+b[c]+"</li>";a+="</ul></li><br>";return a},getMailHeader:function(){return'<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html><head><meta http-equiv="content-type" content="text/html; charset=ISO-8859-1"><title>Aria Templates Tests</title><style>*{font-family: Tahoma,Arial,sans-serif;font-size:10pt;}h1{font-size:14pt;} h2{font-size:22pt;margin-bottom:0px;font-weight:lighter} ul{line-height:1.5em;list-style-type:none;margin:0.3em 0 0 1.5em;padding:0;}</style></head><body>'},
getMailFooter:function(){return'<br><img src="http://aria/demo/3.2/aria/3.2/skins/ariabaseskin/img/aria_logo_small.gif"/><br><b>Aria team</b></body></html>'}}})})();
//YpwKgK3gnz
//LOGICAL-PATH:aria/jsunit/TestRunner.js
//YpwKgK3gnz
Aria.classDefinition({$classpath:"aria.jsunit.TestRunner",$singleton:true,$dependencies:["aria.jsunit.TestEngine","aria.jsunit.TestReport","aria.jsunit.SonarReport","aria.utils.Dom"],$constructor:function(){this._testEngine=null;this._reporter=new aria.jsunit.TestReport({testRunner:this});this._sonarReporter=new aria.jsunit.SonarReport({testRunner:this});this._outputDiv=null},$destructor:function(){this._testEngine&&this._testEngine.$dispose();this._reporter&&this._reporter.$dispose();this._sonarReporter&&
this._sonarReporter.$dispose();this._outputDiv=null},$prototype:{outputDivId:"_TestRunnerOutput_",getReporter:function(){return this._reporter},getSonarReporter:function(){return this._sonarReporter},run:function(a,c){var b=aria.utils.Dom.getElementById(this.outputDivId);if(b==null){var d=Aria.$window.document;b=d.createElement("div");d.body.appendChild(b)}this._outputDiv=b;b=this.getEngine();this._refreshDisplay();this._rootTest=a;b.runTest(a,c)},_onChange:function(a){a=a.changeType;if(a=="testStart"||
a=="testEnd")this._refreshDisplay()},_refreshDisplay:function(){var a=this._testEngine.testReport,c=['<div style="font-family:Arial;font-size:12px">','<span style="font-size:15px;font-weight:bold">Unit Test Report</span>',"<hr/>"];a==null?c.push("Test pending start..."):this._processOutput(a,c);c.push("</div>");a=this._outputDiv;a.innerHTML="";a.innerHTML=c.join("")},_processOutput:function(a,c){var b="#000000",d="",e=a.instance;if(a.state=="done"&&a.totalNbrOfFailures==0&&a.totalNbrOfErrors==0){b=
"green";d=" - OK"}else if(a.totalNbrOfFailures>0||a.totalNbrOfErrors>0){b="red";d=[];if(a.totalNbrOfFailures>0){var f=a.totalNbrOfFailures>1?" failures":" failure";d.push(a.totalNbrOfFailures+f)}if(a.totalNbrOfErrors>0){f=a.totalNbrOfErrors>1?" errors":" error";d.push(a.totalNbrOfErrors+f)}d=" - KO: "+d.join(",")}var g="";f="";if(a.state=="done"){g=" in "+e.getExecutionTime()+" ms";f=a.totalNbrOfAsserts>1?"asserts":"assert";f=" ("+a.totalNbrOfAsserts+" "+f+")"}if(a.state=="skipped"){b="green";d=" - NOT TESTED"}b=
['<div style="color:',b,'">',"<b>",a.testClass,"</b> ",d," - ","<i>",a.state,g,f,"</i>",'<a href="',a.retryURL,'" target="_blank" style="color:blue"> retry</a>',"<br/>"];a.state==="processing"&&b.splice(-1,0,'<a href=javascript:interrupt("',a.testClass,'");> skip</a>');c.push(b.join(""));this._processFailuresOrErrors(a,"failures",c);this._processFailuresOrErrors(a,"errors",c);if(a.subTests&&a.subTests.length>0){c.push('<div style="margin-left:20px">');b=a.subTests.length;for(e=0;b>e;e++)this._processOutput(a.subTests[e],
c);c.push("</div>")}b=["</div>"];c.push(b.join(""))},getFailures:function(){for(var a=[],c=aria.jsunit.TestRunner.getErrors(),b=0;b<c.length;b++)a.push(c[b].testClass);return a.join(",")},getErrors:function(){var a=[];(function(c){var b=c.subTests;if(aria.utils.Type.isArray(b))for(var d=0,e=b.length;d<e;d++)arguments.callee(b[d]);b=[];if(aria.utils.Type.isArray(c.failures))b=b.concat(c.failures);if(aria.utils.Type.isArray(c.errors))b=b.concat(c.errors);if(b.length>0){var f=[];d=0;for(e=b.length;d<
e;d++){var g=b[d];f.push(g.testState+" : "+g.description)}a.push({retryURL:c.retryURL,messages:f,testClass:c.testClass})}})(this.getEngineReport());return a=a.sort(function(c,b){var d=c.testClass.toLowerCase(),e=b.testClass.toLowerCase();if(d>e)return 1;else if(d==e)return 0;return-1})},getReport:function(){return this.getReporter().getReport()},getEngineReport:function(){return this._testEngine.testReport},_processFailuresOrErrors:function(a,c,b){var d=c=="failures";if(a[c]&&a[c].length>0){b.push('<div style="margin-left:20px;color:#000000">');
for(var e=a[c].length,f=0;e>f;f++){var g=a[c][f];d?b.push("Failure #"+(f+1)):b.push("Error #"+(f+1));b.push(": ");if(g.description)b.push(g.description);else d?b.push("Failure"):b.push("Error");b.push(" in <i>"+g.testState+"</i>");b.push("<br/>")}b.push("</div>")}},_getTestCases:function(a){var c=[];if(!a.$TestSuite)return[{classpath:a.$classpath,instance:a}];if(a.isSkipped()||a.isSelected()==-1)return[];a=a.getSubTests();for(var b=0,d=a.length;b<d;b++){var e=a[b];if(e.classpath.indexOf("TestSuite")!=
-1){e=this._getTestCases(e.instance);c=c.concat(e)}else c.push(e)}return c},getTestCases:function(){return this._getTestCases(this._rootTest)},interrupt:function(a){var c=this._testEngine.getCurrentTest();if(!(a!==c.testClass||c.state!=="processing")){c.instance.handleAsyncTestError(Error("Test interrupted by the user"),true);return false}},getEngine:function(){if(this._testEngine==null){this._testEngine=new aria.jsunit.TestEngine;this._testEngine.$on({change:this._onChange,scope:this})}return this._testEngine}}});
//YpwKgK3gnz
//LOGICAL-PATH:aria/jsunit/TestSuite.js
//YpwKgK3gnz
Aria.classDefinition({$classpath:"aria.jsunit.TestSuite",$extends:"aria.jsunit.Test",$dependencies:["aria.core.Sequencer","aria.jsunit.TestCase","aria.jsunit.TestWrapper","aria.utils.Type"],$constructor:function(){this.$Test.constructor.call(this);this._tests=[];this._subTests=[];this._preloadSequencer=this._sequencer=null;this._assertCount=0;this._isSelected=1;this.runIsolated=this.skipTest=false},$destructor:function(){this._sequencer&&this._sequencer.$dispose();this._preloadSequencer&&this._preloadSequencer.$dispose();
this._disposeRunningTest();this.$Test.$destructor.call(this)},$prototype:{refreshSubTests:function(){for(var a=this._tests,b=[],c=0,d=a.length;c<d;c++)b.push({classpath:a[c],instance:null});this._subTests=b},getSubTests:function(){this._subTests.length==0&&this.refreshSubTests();return this._subTests},getSubTestSuites:function(){for(var a=[],b=this.getSubTests(),c=0,d=b.length;c<d;c++){var e=b[c];e.classpath.indexOf("TestSuite")!=-1&&a.push(e)}return a},getAllSubTestCases:function(){for(var a=[],
b=this.getSubTests(),c=0,d=b.length;c<d;c++){var e=b[c];if(e.classpath.indexOf("TestSuite")!=-1){e=e.instance.getAllSubTestCases();a=a.concat(e)}else a.push(e)}return a},getAllSubTestSuites:function(){for(var a=[],b=this.getSubTests(),c=0,d=b.length;c<d;c++){var e=b[c];if(e.classpath.indexOf("TestSuite")!=-1){a.push(e);e=e.instance.getAllSubTestSuites();a=a.concat(e)}}return a},preload:function(){var a=this.getSubTestSuites();if(a.length==0)return this.$raiseEvent("preloadEnd");this._preloadSequencer=
new aria.core.Sequencer;for(var b=0,c=a.length;b<c;b++)this._preloadSequencer.addTask({name:"preload_"+b,fn:this.__preloadSubSuiteTask,scope:this,args:{suite:a[b]},asynchronous:true});this._preloadSequencer.$on({end:this.__onPreloadSequenceEnd,scope:this});this._preloadSequencer.start()},__onPreloadSequenceEnd:function(){this.$raiseEvent("preloadEnd")},__preloadSubSuiteTask:function(a,b){var c=b.suite;Aria.load({classes:[c.classpath],oncomplete:{fn:this.__onLoadSubSuiteCompleted,scope:this,args:{task:a,
suite:c}},onerror:{fn:this.__onDownloadTaskError,scope:this,args:{sequencer:this._preloadSequencer,task:a,test:c}}})},__onLoadSubSuiteCompleted:function(a){var b=a.task;a=a.suite;a.instance=Aria.getClassInstance(a.classpath);a.instance.setParentTest(this);a.instance.$on({preloadEnd:{fn:function(){this._preloadSequencer.notifyTaskEnd(b.id)},scope:this}});a.instance.preload()},addTests:function(){for(var a=arguments,b=0,c=a.length;b<c;b++){var d=a[b];aria.utils.Type.isString(d)&&this._tests.push(d)}},
getFinishedTestsCount:function(){var a=this._suitesInstances,b=this._testPassed,c;for(c in a)if(a.hasOwnProperty(c))b+=a[c].getFinishedTestsCount();return b},run:function(){this._startTest();this._sequencer=new aria.core.Sequencer;this._assertCount=0;var a=this.getSubTests();if(!this.isSkipped()&&this.isSelected()!==-1)for(var b=0,c=a.length;b<c;b++)this._sequencer.addTask({name:"Test_"+b,fn:this.__runTestTask,scope:this,args:{test:a[b]},asynchronous:true});this._sequencer.$on({end:this._onSequenceEnd,
scope:this});this.$raiseEvent({name:"start",testObject:this,testClass:this.$classpath});this._sequencer.start()},isSkipped:function(){return this.skipTest===true},__runTestTask:function(a,b){var c=b.test;Aria.load({classes:[c.classpath],oncomplete:{fn:this._execTestTask,scope:this,args:{task:a,test:c}},onerror:{fn:this.__onDownloadTaskError,scope:this,args:{sequencer:this._sequencer,task:a,test:c}}})},__onDownloadTaskError:function(a){var b=a.test,c="Loading of "+b.classpath+" failed",d=this.__getLastRuntimeError();
if(d)c=d;this.$raiseEvent({name:"failure",testState:this.$classpath,description:c});b.instance=this.__createFailedTest("$fileLoad",c);this._execTestTask(a)},_execTestTask:function(a){var b=a.task;a=a.test;if(!a.instance)a.instance=this._createTest(a.classpath);this.__runningTest=a.instance;this.$raiseEvent({name:"testLoad",testLoader:this,testObject:a.instance});a.instance.$on({end:{fn:this._onTestEnd,scope:this,args:{taskId:b.id,taskMgr:b.taskMgr}},stateChange:{fn:this._raiseStateChange,scope:this}});
a.instance.run()},_onTestEnd:function(a,b){if(a.nbrOfAsserts)this._assertCount+=a.nbrOfAsserts;this._raiseStateChange();a.src.$unregisterListeners(this);this._disposeRunningTest();b.taskMgr.notifyTaskEnd(b.taskId)},_createTest:function(a){var b;try{var c=Aria.getClassRef(a);b=this.runIsolated&&!aria.utils.Type.isInstanceOf(c.prototype,"aria.jsunit.TestSuite")?new aria.jsunit.TestWrapper(a):new c;b.setParentTest(this)}catch(d){a="Uncaught exception while creating "+a+"\nMessage : "+d.message;if(b=
this.__getLastRuntimeError())a=b;b=this.__createFailedTest("$constructor",a)}return b},__getLastRuntimeError:function(){var a="";if(Aria.__runtimeErrors)a=Aria.__runtimeErrors[Aria.__runtimeErrors.length-1];return a},__createFailedTest:function(a,b){var c=new aria.jsunit.TestCase;c._errors=[{type:"failure",testMethod:a,description:b}];return c},_disposeRunningTest:function(){try{if(this.__runningTest){this.__runningTest.$dispose();this.__runningTest.$TestCase&&this.__runningTest.assertLogsEmpty()}}catch(a){var b=
this.__runningTest.$classpath;this.__runningTest._errors.push({type:"failure",testMethod:"$destructor",description:"Uncaught exception while destroying "+b+"\nMessage : "+a.message});this.$raiseEvent({name:"failure",testState:b,description:"Uncaught exception while destroying "+b+"\nMessage : "+a.message})}aria.core.Log.clearAppenders();aria.core.Log.resetLoggingLevels();this.__runningTest=null},_raiseStateChange:function(){this.$raiseEvent({name:"stateChange"})},isSelected:function(){return this._isSelected},
setSelected:function(a){if(this._isSelected!==1){this._isSelected=1;var b=this.getParentTest();b&&a!==false&&b.checkSelected();a=this.getSubTestSuites();b=0;for(var c=a.length;b<c;b++)a[b].instance.setSelected(false)}},setUnselected:function(a){if(this._isSelected!==-1){this._isSelected=-1;var b=this.getParentTest();b&&a!==false&&b.checkSelected();a=this.getSubTestSuites();b=0;for(var c=a.length;b<c;b++)a[b].instance.setUnselected(false)}},checkSelected:function(){for(var a=false,b=false,c=this.getSubTestSuites(),
d=0,e=c.length;d<e;d++){var f=c[d];if(f.instance.isSelected()==1)a=true;else{if(f.instance.isSelected()!=-1)a=true;b=true}}if(a&&!b)this.setSelected();else if(!a&&b&&this.getSubTests().length==c.length)this.setUnselected();else{this._isSelected=0;(a=this.getParentTest())&&a.checkSelected()}},_onSequenceEnd:function(){if(this._sequencer){this._sequencer.$dispose();this._sequencer=null}this._endTest();this._isFinished=true;this.$raiseEvent({name:"end",testObject:this,testClass:this.$classpath,nbrOfAsserts:this._assertCount})}}});
//YpwKgK3gnz
//LOGICAL-PATH:aria/jsunit/TestWrapper.js
//YpwKgK3gnz
Aria.classDefinition({$classpath:"aria.jsunit.TestWrapper",$extends:"aria.jsunit.Assert",$dependencies:["aria.utils.FrameATLoader"],$constructor:function(a){this.$Assert.constructor.call(this);this.$classpath=a},$destructor:function(){this._removeFrame();this.$Assert.$destructor.call(this)},$prototype:{run:function(){this._startTest();var a=Aria.$window.document;this._frame=a.createElement("iframe");this._frame.style.cssText="z-index:100000;position:absolute;left:0px;top:0px;width:1024px;height:768px;border:1px solid black;visibility:hidden;display:block;background-color:white;";
a.body.appendChild(this._frame);this._subWindow=this._frame.contentWindow;aria.utils.FrameATLoader.loadAriaTemplatesInFrame(this._frame,{fn:this._atLoadedInFrame,scope:this})},_atLoadedInFrame:function(a){if(a.success){var b=this._subWindow;a=b.Aria;b=b.document;var c=b.createElement("div");c.setAttribute("id","TESTAREA");b.body.appendChild(c);a.load({classes:["aria.widgets.AriaSkinInterface"],oncomplete:{fn:this._ariaSkinInterfaceLoaded,scope:this},onerror:{fn:this._loadTestError,scope:this}})}else{this.raiseFailure("An error occurred while loading the framework in the iframe.");
this._end()}},_ariaSkinInterfaceLoaded:function(){var a=this._subWindow.Aria;if(Aria.getClassRef(this.$classpath).prototype.needVisibleDocument)this._frame.style.visibility="visible";a.load({classes:[this.$classpath],oncomplete:{fn:this._loadTestComplete,scope:this},onerror:{fn:this._loadTestError,scope:this}})},_loadTestError:function(){this.raiseFailure("An error occurred while loading the test class.");this._end()},_loadTestComplete:function(){this._testInstance=this._subWindow.Aria.getClassInstance(this.$classpath);
this._testInstance.$on({"*":this._testEvent,scope:this});this._testInstance.run()},handleAsyncTestError:function(){this.raiseFailure("Test was interrupted.");this._end()},_testEvent:function(a){if(a.name=="error")this.raiseError(a.exception,a.msg);else if(a.name=="failure")this.raiseFailure(a.description);else if(a.name=="stateChange")this._updateAssertInfo(a.testState);else a.name!="start"&&a.name=="end"&&aria.core.Timer.addCallback({fn:this._end,scope:this,delay:100})},_removeFrame:function(){if(this._frame){if(this._subWindow.Aria&&
this._subWindow.Aria.eval){var a=this._subWindow.Aria.eval("(function () { try { if (this._testInstance) {this._testInstance.$dispose();} return Aria.dispose(); } catch (e) { return { error: e }; }}).call(arguments[2])",null,this);this._testInstance=null;if(a)if(a.error)this.raiseError(a.error,"An exception occurred while disposing the test or the framework.");else if(a.nbNotDisposed!=0){var b=a.notDisposed;a=["There were ",a.nbNotDisposed," undisposed objects ("];var c=true,d;for(d in b)if(b.hasOwnProperty(d)){if(c)c=
false;else a.push(", ");a.push(b[d].$classpath)}a.push(")");this.raiseFailure(a.join(""))}}Aria.$window.document.body.removeChild(this._frame);this._frame=this._subWindow=null}},_end:function(){this._removeFrame();this._endTest()}}});
//YpwKgK3gnz
//LOGICAL-PATH:aria/jsunit/UITestCase.js
//YpwKgK3gnz
Aria.classDefinition({$classpath:"aria.jsunit.UITestCase",$extends:"aria.jsunit.TestCase",$dependencies:["aria.jsunit.ScreenCapture"],$constructor:function(){this.$TestCase.constructor.call(this);this.screenCapture=aria.jsunit.ScreenCapture},$destructor:function(){this.$TestCase.$destructor.call(this);this.screenCapture=null},$prototype:{runUITest:function(a){var b=a.scope?a.scope:this;this.screenCapture.capture({useCaseName:a.testCaseName,conf:{x:a.x?a.x:0,y:a.y?a.y:0,width:a.width?a.width:800,height:a.height?
a.width:200,threshold:0},oncomplete:a.oncomplete,scope:b})||a.oncomplete.call(b)},getUITestResult:function(){return this.screenCapture.getResponse()},__captureHeader:function(){this.screenCapture.capture("HomePage_Header",{x:0,y:0,width:1280,height:65,threshold:0},this.responseCallbackMethod,this)},__captureMenu:function(){this.screenCapture.capture("HomePage_Menu",{x:0,y:0,width:320,height:500,threshold:0},this.responseCallbackMethod,this)},responseCallbackMethod:function(){this.screenCapture.getResponse(this.responseCallbackMethod,
this)}}});
//YpwKgK3gnz
//LOGICAL-PATH:aria/jsunit/WidgetTestCase.js
//YpwKgK3gnz
Aria.classDefinition({$classpath:"aria.jsunit.WidgetTestCase",$extends:"aria.jsunit.TestCase",$dependencies:["aria.jsunit.helpers.OutObj","aria.widgets.AriaSkinInterface"],$constructor:function(){this.$TestCase.constructor.call(this);this.outObj=aria.jsunit.helpers.OutObj},$destructor:function(){this.outObj.clearAll();this.outObj=null;this.$TestCase.$destructor.call(this)}});
//YpwKgK3gnz
//LOGICAL-PATH:aria/utils/FrameATLoader.js
//YpwKgK3gnz
Aria.classDefinition({$classpath:"aria.utils.FrameATLoader",$singleton:true,$events:{bootstrapLoaded:"Raised when the bootstrap is loaded."},$constructor:function(){this.frameworkHrefPattern=/aria-templates-([^\/]+)\.js/;this.bootRootFolderPath=this.frameworkJS=this.frameworkHref=null;this._loadingFrameworkJs=false;this._callbacks={};this._counter=0},$prototype:{loadAriaTemplatesInFrame:function(b,c){this.loadBootstrap({fn:this._loadATInFrameCb1,scope:this,args:{frame:b,cb:c}})},_loadATInFrameCb1:function(b,
c){var a=this._createCallbackId({fn:this._loadATInFrameCb2,scope:this,args:c});a=[aria.core.DownloadMgr.resolveURL("aria/utils/FrameATLoaderHTML.html"),"?",encodeURIComponent(Aria.$frameworkWindow.location.href.replace(/(\?|\#).*$/,"")),"#",a].join("");c.frame.contentWindow.location=a},_loadATInFrameCb2:function(b,c){var a=c.frame.contentWindow,d=a.document,e=a.Aria;e.rootFolderPath=this.bootRootFolderPath;e.debug=Aria.debug;e.memCheckMode=Aria.memCheckMode;a.Aria.eval(this.frameworkJS);d.write('<script type="text/javascript">parent.aria.utils.FrameATLoader.callFromFrame('+
this._createCallbackId({fn:this._loadATInFrameCb3,scope:this,args:c})+");<\/script>")},_loadATInFrameCb3:function(b,c){var a=c.frame.contentWindow;if(a.aria==null)this.$callback(c.cb,{success:false});else{a.Aria.rootFolderPath=Aria.rootFolderPath;var d=a.aria.utils.Json.copy(aria.core.DownloadMgr._rootMap);a.aria.core.DownloadMgr.updateRootMap(d);aria.widgets&&aria.widgets.AriaSkin&&a.Aria.classDefinition({$classpath:"aria.widgets.AriaSkin",$singleton:true,$prototype:a.aria.utils.Json.copy(aria.widgets.AriaSkin.classDefinition.$prototype)});
d=a.aria.core.DownloadMgr;a=a.aria.core.Cache;var e=aria.core.Cache,h=e.content.files,i=e.content.urls,j=e.STATUS_AVAILABLE;e=e.STATUS_ERROR;for(var f in h)if(h.hasOwnProperty(f)){var g=h[f];if(g.status==j)d.loadFileContent(f,g.value,false);else g.status==e&&d.loadFileContent(f,null,true)}for(var k in i)if(i.hasOwnProperty(k)){g=i[k];f=a.getItem("urls",k,true);if(g.status==j)f.status=j;else if(g.status==e)f.status=e}this.$callback(c.cb,{success:true})}},_createCallbackId:function(b){this._counter++;
this._callbacks[this._counter]=b;return this._counter},callFromFrame:function(b){var c=this._callbacks[b];delete this._callbacks[b];this.$callback(c)},_findScriptPattern:function(){for(var b=Aria.$frameworkWindow.document.getElementsByTagName("script"),c=0,a=b.length;c<a;c++){var d=b[c];if(d.attributes&&d.attributes.src){d=d.attributes.src.nodeValue;if(this.frameworkHrefPattern.exec(d))return d}}this.$logError("Could not find the script corresponding to pattern: %1. Please set the aria.jsunit.FrameATLoader.frameworkHref property manually.");
return null},loadBootstrap:function(b){if(this.bootRootFolderPath==null)this.bootRootFolderPath=aria.core.DownloadMgr.resolveURL("aria/Aria.js",true).replace(/aria\/Aria\.js$/,"");if(this.frameworkJS)this.$callback(b);else{if(this.frameworkHref==null){this.frameworkHref=this._findScriptPattern(this.frameworkHrefPattern);if(this.frameworkHref==null)return}this.$onOnce({bootstrapLoaded:b});if(!this._loadingFrameworkJs){this._loadingFrameworkJs=true;aria.core.IO.asyncRequest({url:this.frameworkHref,
callback:{fn:this._frameworkLoaded,scope:this}})}}},_frameworkLoaded:function(b){this._loadingFrameworkJs=false;this.frameworkJS=b.responseText;this.$raiseEvent("bootstrapLoaded")}}});